{"ast":null,"code":"var __extends = this && this.__extends || function (d, b) {\n  for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar events_1 = require('events');\nvar dispatcher_1 = require('./dispatcher');\nvar constants_1 = require('./constants');\nvar Store = function (_super) {\n  __extends(Store, _super);\n  function Store() {\n    _super.call(this);\n    this.frame = null;\n    this.forwardable = false;\n    this.backable = false;\n  }\n  Store.prototype.getCurrentURL = function () {\n    if (!this.frame) {\n      return '';\n    }\n    return this.frame.getUrl();\n  };\n  return Store;\n}(events_1.EventEmitter);\nvar store = new Store();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = store;\nfunction updateForwardable(new_value) {\n  if (new_value !== store.forwardable) {\n    store.forwardable = new_value;\n    store.emit('update-forwardable', new_value);\n  }\n}\nfunction updateBackable(new_value) {\n  if (new_value !== store.backable) {\n    store.backable = new_value;\n    store.emit('update-backable', new_value);\n  }\n}\nfunction goForward() {\n  if (store.frame && store.frame.canGoForward()) {\n    store.frame.goForward();\n  }\n}\nfunction goBack() {\n  if (store.frame && store.frame.canGoBack()) {\n    store.frame.goBack();\n  }\n}\nfunction createFrame(frame) {\n  if (store.frame) {\n    console.error('Error: Only one embedded browser exists!', store.frame);\n  }\n  store.frame = frame;\n  store.frame.addEventListener('did-finish-load', function () {\n    store.emit('update-title', store.frame.getTitle());\n    store.emit('update-url', store.frame.getUrl());\n    updateForwardable(store.frame.canGoForward());\n    updateBackable(store.frame.canGoBack());\n  });\n}\nfunction openURL(url) {\n  if (!url) {\n    return;\n  }\n  store.frame.src = url;\n}\nstore.dispatch_token = dispatcher_1.default.register(function (action) {\n  switch (action.type) {\n    case constants_1.ActionKind.GoForward:\n      goForward();\n      break;\n    case constants_1.ActionKind.GoBack:\n      goBack();\n      break;\n    case constants_1.ActionKind.CreateInnerFrame:\n      createFrame(action.inner_frame);\n      break;\n    case constants_1.ActionKind.OpenURL:\n      openURL(action.url);\n      break;\n    default:\n      break;\n  }\n});","map":{"version":3,"names":["events_1","require","dispatcher_1","constants_1","Store","_super","__extends","call","frame","forwardable","backable","prototype","getCurrentURL","getUrl","EventEmitter","store","Object","defineProperty","exports","value","updateForwardable","new_value","emit","updateBackable","goForward","canGoForward","goBack","canGoBack","createFrame","console","error","addEventListener","getTitle","openURL","url","src","dispatch_token","default","register","action","type","ActionKind","GoForward","GoBack","CreateInnerFrame","inner_frame","OpenURL"],"sources":["../src/store.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}