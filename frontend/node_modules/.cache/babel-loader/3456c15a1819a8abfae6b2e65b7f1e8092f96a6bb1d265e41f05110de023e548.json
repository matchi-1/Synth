{"ast":null,"code":"/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { source as injectedSource } from '../generated/injected.js';\n/**\n * @internal\n */\nexport class ScriptInjector {\n  #updated = false;\n  #amendments = new Set();\n  // Appends a statement of the form `(PuppeteerUtil) => {...}`.\n  append(statement) {\n    this.#update(() => {\n      this.#amendments.add(statement);\n    });\n  }\n  pop(statement) {\n    this.#update(() => {\n      this.#amendments.delete(statement);\n    });\n  }\n  inject(inject, force = false) {\n    if (this.#updated || force) {\n      inject(this.#get());\n    }\n    this.#updated = false;\n  }\n  #update(callback) {\n    callback();\n    this.#updated = true;\n  }\n  #get() {\n    return `(() => {\n      const module = {};\n      ${injectedSource}\n      ${[...this.#amendments].map(statement => {\n      return `(${statement})(module.exports.default);`;\n    }).join('')}\n      return module.exports.default;\n    })()`;\n  }\n}\n/**\n * @internal\n */\nexport const scriptInjector = new ScriptInjector();","map":{"version":3,"names":["source","injectedSource","ScriptInjector","updated","amendments","Set","append","statement","update","add","pop","delete","inject","force","get","#update","callback","#get","map","join","scriptInjector"],"sources":["C:\\Users\\raffy\\Desktop\\test\\node_modules\\puppeteer-core\\src\\common\\ScriptInjector.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport {source as injectedSource} from '../generated/injected.js';\n\n/**\n * @internal\n */\nexport class ScriptInjector {\n  #updated = false;\n  #amendments = new Set<string>();\n\n  // Appends a statement of the form `(PuppeteerUtil) => {...}`.\n  append(statement: string): void {\n    this.#update(() => {\n      this.#amendments.add(statement);\n    });\n  }\n\n  pop(statement: string): void {\n    this.#update(() => {\n      this.#amendments.delete(statement);\n    });\n  }\n\n  inject(inject: (script: string) => void, force = false): void {\n    if (this.#updated || force) {\n      inject(this.#get());\n    }\n    this.#updated = false;\n  }\n\n  #update(callback: () => void): void {\n    callback();\n    this.#updated = true;\n  }\n\n  #get(): string {\n    return `(() => {\n      const module = {};\n      ${injectedSource}\n      ${[...this.#amendments]\n        .map(statement => {\n          return `(${statement})(module.exports.default);`;\n        })\n        .join('')}\n      return module.exports.default;\n    })()`;\n  }\n}\n\n/**\n * @internal\n */\nexport const scriptInjector = new ScriptInjector();\n"],"mappings":"AAAA;;;;;AAKA,SAAQA,MAAM,IAAIC,cAAc,QAAO,0BAA0B;AAEjE;;;AAGA,OAAM,MAAOC,cAAc;EACzB,CAAAC,OAAQ,GAAG,KAAK;EAChB,CAAAC,UAAW,GAAG,IAAIC,GAAG,EAAU;EAE/B;EACAC,MAAMA,CAACC,SAAiB;IACtB,IAAI,CAAC,CAAAC,MAAO,CAAC,MAAK;MAChB,IAAI,CAAC,CAAAJ,UAAW,CAACK,GAAG,CAACF,SAAS,CAAC;IACjC,CAAC,CAAC;EACJ;EAEAG,GAAGA,CAACH,SAAiB;IACnB,IAAI,CAAC,CAAAC,MAAO,CAAC,MAAK;MAChB,IAAI,CAAC,CAAAJ,UAAW,CAACO,MAAM,CAACJ,SAAS,CAAC;IACpC,CAAC,CAAC;EACJ;EAEAK,MAAMA,CAACA,MAAgC,EAAEC,KAAK,GAAG,KAAK;IACpD,IAAI,IAAI,CAAC,CAAAV,OAAQ,IAAIU,KAAK,EAAE;MAC1BD,MAAM,CAAC,IAAI,CAAC,CAAAE,GAAI,EAAE,CAAC;IACrB;IACA,IAAI,CAAC,CAAAX,OAAQ,GAAG,KAAK;EACvB;EAEA,CAAAK,MAAOO,CAACC,QAAoB;IAC1BA,QAAQ,EAAE;IACV,IAAI,CAAC,CAAAb,OAAQ,GAAG,IAAI;EACtB;EAEA,CAAAW,GAAIG,CAAA;IACF,OAAO;;QAEHhB,cAAc;QACd,CAAC,GAAG,IAAI,CAAC,CAAAG,UAAW,CAAC,CACpBc,GAAG,CAACX,SAAS,IAAG;MACf,OAAO,IAAIA,SAAS,4BAA4B;IAClD,CAAC,CAAC,CACDY,IAAI,CAAC,EAAE,CAAC;;SAER;EACP;;AAGF;;;AAGA,OAAO,MAAMC,cAAc,GAAG,IAAIlB,cAAc,EAAE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}