{"ast":null,"code":"var __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __setFunctionName = this && this.__setFunctionName || function (f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", {\n    configurable: true,\n    value: prefix ? \"\".concat(prefix, \" \", name) : name\n  });\n};\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { debugError } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { invokeAtMostOnceForArguments } from '../util/decorators.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\n/**\n * @internal\n */\nexport class EmulatedState {\n  #state;\n  #clientProvider;\n  #updater;\n  constructor(initialState, clientProvider, updater) {\n    this.#state = initialState;\n    this.#clientProvider = clientProvider;\n    this.#updater = updater;\n    this.#clientProvider.registerState(this);\n  }\n  async setState(state) {\n    this.#state = state;\n    await this.sync();\n  }\n  get state() {\n    return this.#state;\n  }\n  async sync() {\n    await Promise.all(this.#clientProvider.clients().map(client => {\n      return this.#updater(client, this.#state);\n    }));\n  }\n}\n/**\n * @internal\n */\nlet EmulationManager = (() => {\n  let _instanceExtraInitializers = [];\n  let _private_applyViewport_decorators;\n  let _private_applyViewport_descriptor;\n  let _private_emulateIdleState_decorators;\n  let _private_emulateIdleState_descriptor;\n  let _private_emulateTimezone_decorators;\n  let _private_emulateTimezone_descriptor;\n  let _private_emulateVisionDeficiency_decorators;\n  let _private_emulateVisionDeficiency_descriptor;\n  let _private_emulateCpuThrottling_decorators;\n  let _private_emulateCpuThrottling_descriptor;\n  let _private_emulateMediaFeatures_decorators;\n  let _private_emulateMediaFeatures_descriptor;\n  let _private_emulateMediaType_decorators;\n  let _private_emulateMediaType_descriptor;\n  let _private_setGeolocation_decorators;\n  let _private_setGeolocation_descriptor;\n  let _private_setDefaultBackgroundColor_decorators;\n  let _private_setDefaultBackgroundColor_descriptor;\n  let _private_setJavaScriptEnabled_decorators;\n  let _private_setJavaScriptEnabled_descriptor;\n  return class EmulationManager {\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n      _private_applyViewport_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateIdleState_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateTimezone_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateVisionDeficiency_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateCpuThrottling_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateMediaFeatures_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateMediaType_decorators = [invokeAtMostOnceForArguments];\n      _private_setGeolocation_decorators = [invokeAtMostOnceForArguments];\n      _private_setDefaultBackgroundColor_decorators = [invokeAtMostOnceForArguments];\n      _private_setJavaScriptEnabled_decorators = [invokeAtMostOnceForArguments];\n      __esDecorate(this, _private_applyViewport_descriptor = {\n        value: __setFunctionName(async function (client, viewportState) {\n          if (!viewportState.viewport) {\n            await Promise.all([client.send('Emulation.clearDeviceMetricsOverride'), client.send('Emulation.setTouchEmulationEnabled', {\n              enabled: false\n            })]).catch(debugError);\n            return;\n          }\n          const {\n            viewport\n          } = viewportState;\n          const mobile = viewport.isMobile || false;\n          const width = viewport.width;\n          const height = viewport.height;\n          const deviceScaleFactor = viewport.deviceScaleFactor ?? 1;\n          const screenOrientation = viewport.isLandscape ? {\n            angle: 90,\n            type: 'landscapePrimary'\n          } : {\n            angle: 0,\n            type: 'portraitPrimary'\n          };\n          const hasTouch = viewport.hasTouch || false;\n          await Promise.all([client.send('Emulation.setDeviceMetricsOverride', {\n            mobile,\n            width,\n            height,\n            deviceScaleFactor,\n            screenOrientation\n          }).catch(err => {\n            if (err.message.includes('Target does not support metrics override')) {\n              debugError(err);\n              return;\n            }\n            throw err;\n          }), client.send('Emulation.setTouchEmulationEnabled', {\n            enabled: hasTouch\n          })]);\n        }, \"#applyViewport\")\n      }, _private_applyViewport_decorators, {\n        kind: \"method\",\n        name: \"#applyViewport\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #applyViewport in obj,\n          get: obj => obj.#applyViewport\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateIdleState_descriptor = {\n        value: __setFunctionName(async function (client, idleStateState) {\n          if (!idleStateState.active) {\n            return;\n          }\n          if (idleStateState.overrides) {\n            await client.send('Emulation.setIdleOverride', {\n              isUserActive: idleStateState.overrides.isUserActive,\n              isScreenUnlocked: idleStateState.overrides.isScreenUnlocked\n            });\n          } else {\n            await client.send('Emulation.clearIdleOverride');\n          }\n        }, \"#emulateIdleState\")\n      }, _private_emulateIdleState_decorators, {\n        kind: \"method\",\n        name: \"#emulateIdleState\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateIdleState in obj,\n          get: obj => obj.#emulateIdleState\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateTimezone_descriptor = {\n        value: __setFunctionName(async function (client, timezoneState) {\n          if (!timezoneState.active) {\n            return;\n          }\n          try {\n            await client.send('Emulation.setTimezoneOverride', {\n              timezoneId: timezoneState.timezoneId || ''\n            });\n          } catch (error) {\n            if (isErrorLike(error) && error.message.includes('Invalid timezone')) {\n              throw new Error(`Invalid timezone ID: ${timezoneState.timezoneId}`);\n            }\n            throw error;\n          }\n        }, \"#emulateTimezone\")\n      }, _private_emulateTimezone_decorators, {\n        kind: \"method\",\n        name: \"#emulateTimezone\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateTimezone in obj,\n          get: obj => obj.#emulateTimezone\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateVisionDeficiency_descriptor = {\n        value: __setFunctionName(async function (client, visionDeficiency) {\n          if (!visionDeficiency.active) {\n            return;\n          }\n          await client.send('Emulation.setEmulatedVisionDeficiency', {\n            type: visionDeficiency.visionDeficiency || 'none'\n          });\n        }, \"#emulateVisionDeficiency\")\n      }, _private_emulateVisionDeficiency_decorators, {\n        kind: \"method\",\n        name: \"#emulateVisionDeficiency\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateVisionDeficiency in obj,\n          get: obj => obj.#emulateVisionDeficiency\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateCpuThrottling_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setCPUThrottlingRate', {\n            rate: state.factor ?? 1\n          });\n        }, \"#emulateCpuThrottling\")\n      }, _private_emulateCpuThrottling_decorators, {\n        kind: \"method\",\n        name: \"#emulateCpuThrottling\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateCpuThrottling in obj,\n          get: obj => obj.#emulateCpuThrottling\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateMediaFeatures_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setEmulatedMedia', {\n            features: state.mediaFeatures\n          });\n        }, \"#emulateMediaFeatures\")\n      }, _private_emulateMediaFeatures_decorators, {\n        kind: \"method\",\n        name: \"#emulateMediaFeatures\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateMediaFeatures in obj,\n          get: obj => obj.#emulateMediaFeatures\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateMediaType_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setEmulatedMedia', {\n            media: state.type || ''\n          });\n        }, \"#emulateMediaType\")\n      }, _private_emulateMediaType_decorators, {\n        kind: \"method\",\n        name: \"#emulateMediaType\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateMediaType in obj,\n          get: obj => obj.#emulateMediaType\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_setGeolocation_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setGeolocationOverride', state.geoLocation ? {\n            longitude: state.geoLocation.longitude,\n            latitude: state.geoLocation.latitude,\n            accuracy: state.geoLocation.accuracy\n          } : undefined);\n        }, \"#setGeolocation\")\n      }, _private_setGeolocation_decorators, {\n        kind: \"method\",\n        name: \"#setGeolocation\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #setGeolocation in obj,\n          get: obj => obj.#setGeolocation\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_setDefaultBackgroundColor_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setDefaultBackgroundColorOverride', {\n            color: state.color\n          });\n        }, \"#setDefaultBackgroundColor\")\n      }, _private_setDefaultBackgroundColor_decorators, {\n        kind: \"method\",\n        name: \"#setDefaultBackgroundColor\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #setDefaultBackgroundColor in obj,\n          get: obj => obj.#setDefaultBackgroundColor\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_setJavaScriptEnabled_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setScriptExecutionDisabled', {\n            value: !state.javaScriptEnabled\n          });\n        }, \"#setJavaScriptEnabled\")\n      }, _private_setJavaScriptEnabled_decorators, {\n        kind: \"method\",\n        name: \"#setJavaScriptEnabled\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #setJavaScriptEnabled in obj,\n          get: obj => obj.#setJavaScriptEnabled\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      if (_metadata) Object.defineProperty(this, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n    }\n    #client = __runInitializers(this, _instanceExtraInitializers);\n    #emulatingMobile = false;\n    #hasTouch = false;\n    #states = [];\n    #viewportState = new EmulatedState({\n      active: false\n    }, this, this.#applyViewport);\n    #idleOverridesState = new EmulatedState({\n      active: false\n    }, this, this.#emulateIdleState);\n    #timezoneState = new EmulatedState({\n      active: false\n    }, this, this.#emulateTimezone);\n    #visionDeficiencyState = new EmulatedState({\n      active: false\n    }, this, this.#emulateVisionDeficiency);\n    #cpuThrottlingState = new EmulatedState({\n      active: false\n    }, this, this.#emulateCpuThrottling);\n    #mediaFeaturesState = new EmulatedState({\n      active: false\n    }, this, this.#emulateMediaFeatures);\n    #mediaTypeState = new EmulatedState({\n      active: false\n    }, this, this.#emulateMediaType);\n    #geoLocationState = new EmulatedState({\n      active: false\n    }, this, this.#setGeolocation);\n    #defaultBackgroundColorState = new EmulatedState({\n      active: false\n    }, this, this.#setDefaultBackgroundColor);\n    #javascriptEnabledState = new EmulatedState({\n      javaScriptEnabled: true,\n      active: false\n    }, this, this.#setJavaScriptEnabled);\n    #secondaryClients = new Set();\n    constructor(client) {\n      this.#client = client;\n    }\n    updateClient(client) {\n      this.#client = client;\n      this.#secondaryClients.delete(client);\n    }\n    registerState(state) {\n      this.#states.push(state);\n    }\n    clients() {\n      return [this.#client, ...Array.from(this.#secondaryClients)];\n    }\n    async registerSpeculativeSession(client) {\n      this.#secondaryClients.add(client);\n      client.once(CDPSessionEvent.Disconnected, () => {\n        this.#secondaryClients.delete(client);\n      });\n      // We don't await here because we want to register all state changes before\n      // the target is unpaused.\n      void Promise.all(this.#states.map(s => {\n        return s.sync().catch(debugError);\n      }));\n    }\n    get javascriptEnabled() {\n      return this.#javascriptEnabledState.state.javaScriptEnabled;\n    }\n    async emulateViewport(viewport) {\n      const currentState = this.#viewportState.state;\n      if (!viewport && !currentState.active) {\n        return false;\n      }\n      await this.#viewportState.setState(viewport ? {\n        viewport,\n        active: true\n      } : {\n        active: false\n      });\n      const mobile = viewport?.isMobile || false;\n      const hasTouch = viewport?.hasTouch || false;\n      const reloadNeeded = this.#emulatingMobile !== mobile || this.#hasTouch !== hasTouch;\n      this.#emulatingMobile = mobile;\n      this.#hasTouch = hasTouch;\n      return reloadNeeded;\n    }\n    get #applyViewport() {\n      return _private_applyViewport_descriptor.value;\n    }\n    async emulateIdleState(overrides) {\n      await this.#idleOverridesState.setState({\n        active: true,\n        overrides\n      });\n    }\n    get #emulateIdleState() {\n      return _private_emulateIdleState_descriptor.value;\n    }\n    get #emulateTimezone() {\n      return _private_emulateTimezone_descriptor.value;\n    }\n    async emulateTimezone(timezoneId) {\n      await this.#timezoneState.setState({\n        timezoneId,\n        active: true\n      });\n    }\n    get #emulateVisionDeficiency() {\n      return _private_emulateVisionDeficiency_descriptor.value;\n    }\n    async emulateVisionDeficiency(type) {\n      const visionDeficiencies = new Set(['none', 'achromatopsia', 'blurredVision', 'deuteranopia', 'protanopia', 'tritanopia']);\n      assert(!type || visionDeficiencies.has(type), `Unsupported vision deficiency: ${type}`);\n      await this.#visionDeficiencyState.setState({\n        active: true,\n        visionDeficiency: type\n      });\n    }\n    get #emulateCpuThrottling() {\n      return _private_emulateCpuThrottling_descriptor.value;\n    }\n    async emulateCPUThrottling(factor) {\n      assert(factor === null || factor >= 1, 'Throttling rate should be greater or equal to 1');\n      await this.#cpuThrottlingState.setState({\n        active: true,\n        factor: factor ?? undefined\n      });\n    }\n    get #emulateMediaFeatures() {\n      return _private_emulateMediaFeatures_descriptor.value;\n    }\n    async emulateMediaFeatures(features) {\n      if (Array.isArray(features)) {\n        for (const mediaFeature of features) {\n          const name = mediaFeature.name;\n          assert(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(name), 'Unsupported media feature: ' + name);\n        }\n      }\n      await this.#mediaFeaturesState.setState({\n        active: true,\n        mediaFeatures: features\n      });\n    }\n    get #emulateMediaType() {\n      return _private_emulateMediaType_descriptor.value;\n    }\n    async emulateMediaType(type) {\n      assert(type === 'screen' || type === 'print' || (type ?? undefined) === undefined, 'Unsupported media type: ' + type);\n      await this.#mediaTypeState.setState({\n        type,\n        active: true\n      });\n    }\n    get #setGeolocation() {\n      return _private_setGeolocation_descriptor.value;\n    }\n    async setGeolocation(options) {\n      const {\n        longitude,\n        latitude,\n        accuracy = 0\n      } = options;\n      if (longitude < -180 || longitude > 180) {\n        throw new Error(`Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`);\n      }\n      if (latitude < -90 || latitude > 90) {\n        throw new Error(`Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`);\n      }\n      if (accuracy < 0) {\n        throw new Error(`Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`);\n      }\n      await this.#geoLocationState.setState({\n        active: true,\n        geoLocation: {\n          longitude,\n          latitude,\n          accuracy\n        }\n      });\n    }\n    get #setDefaultBackgroundColor() {\n      return _private_setDefaultBackgroundColor_descriptor.value;\n    }\n    /**\n     * Resets default white background\n     */\n    async resetDefaultBackgroundColor() {\n      await this.#defaultBackgroundColorState.setState({\n        active: true,\n        color: undefined\n      });\n    }\n    /**\n     * Hides default white background\n     */\n    async setTransparentBackgroundColor() {\n      await this.#defaultBackgroundColorState.setState({\n        active: true,\n        color: {\n          r: 0,\n          g: 0,\n          b: 0,\n          a: 0\n        }\n      });\n    }\n    get #setJavaScriptEnabled() {\n      return _private_setJavaScriptEnabled_descriptor.value;\n    }\n    async setJavaScriptEnabled(enabled) {\n      await this.#javascriptEnabledState.setState({\n        active: true,\n        javaScriptEnabled: enabled\n      });\n    }\n  };\n})();\nexport { EmulationManager };","map":{"version":3,"names":["CDPSessionEvent","debugError","assert","invokeAtMostOnceForArguments","isErrorLike","EmulatedState","state","clientProvider","updater","constructor","initialState","registerState","setState","sync","Promise","all","clients","map","client","EmulationManager","__esDecorate","_private_applyViewport_descriptor","value","__setFunctionName","viewportState","viewport","send","enabled","catch","mobile","isMobile","width","height","deviceScaleFactor","screenOrientation","isLandscape","angle","type","hasTouch","err","message","includes","_private_applyViewport_decorators","kind","name","static","private","access","has","obj","applyViewport","get","metadata","_metadata","_instanceExtraInitializers","_private_emulateIdleState_descriptor","idleStateState","active","overrides","isUserActive","isScreenUnlocked","_private_emulateIdleState_decorators","emulateIdleState","_private_emulateTimezone_descriptor","timezoneState","timezoneId","error","Error","_private_emulateTimezone_decorators","emulateTimezone","_private_emulateVisionDeficiency_descriptor","visionDeficiency","_private_emulateVisionDeficiency_decorators","emulateVisionDeficiency","_private_emulateCpuThrottling_descriptor","rate","factor","_private_emulateCpuThrottling_decorators","emulateCpuThrottling","_private_emulateMediaFeatures_descriptor","features","mediaFeatures","_private_emulateMediaFeatures_decorators","emulateMediaFeatures","_private_emulateMediaType_descriptor","media","_private_emulateMediaType_decorators","emulateMediaType","_private_setGeolocation_descriptor","geoLocation","longitude","latitude","accuracy","undefined","_private_setGeolocation_decorators","setGeolocation","_private_setDefaultBackgroundColor_descriptor","color","_private_setDefaultBackgroundColor_decorators","setDefaultBackgroundColor","_private_setJavaScriptEnabled_descriptor","javaScriptEnabled","_private_setJavaScriptEnabled_decorators","setJavaScriptEnabled","__runInitializers","emulatingMobile","states","idleOverridesState","visionDeficiencyState","cpuThrottlingState","mediaFeaturesState","mediaTypeState","geoLocationState","defaultBackgroundColorState","javascriptEnabledState","secondaryClients","Set","updateClient","delete","push","Array","from","registerSpeculativeSession","add","once","Disconnected","s","javascriptEnabled","emulateViewport","currentState","reloadNeeded","#applyViewport","#emulateIdleState","#emulateTimezone","#emulateVisionDeficiency","visionDeficiencies","#emulateCpuThrottling","emulateCPUThrottling","#emulateMediaFeatures","isArray","mediaFeature","test","#emulateMediaType","#setGeolocation","options","#setDefaultBackgroundColor","resetDefaultBackgroundColor","setTransparentBackgroundColor","r","g","b","a","#setJavaScriptEnabled"],"sources":["C:\\Users\\raffy\\Desktop\\test\\node_modules\\puppeteer-core\\src\\cdp\\EmulationManager.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport type {Protocol} from 'devtools-protocol';\n\nimport {type CDPSession, CDPSessionEvent} from '../api/CDPSession.js';\nimport type {GeolocationOptions, MediaFeature} from '../api/Page.js';\nimport {debugError} from '../common/util.js';\nimport type {Viewport} from '../common/Viewport.js';\nimport {assert} from '../util/assert.js';\nimport {invokeAtMostOnceForArguments} from '../util/decorators.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\ninterface ViewportState {\n  viewport?: Viewport;\n  active: boolean;\n}\n\ninterface IdleOverridesState {\n  overrides?: {\n    isUserActive: boolean;\n    isScreenUnlocked: boolean;\n  };\n  active: boolean;\n}\n\ninterface TimezoneState {\n  timezoneId?: string;\n  active: boolean;\n}\n\ninterface VisionDeficiencyState {\n  visionDeficiency?: Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type'];\n  active: boolean;\n}\n\ninterface CpuThrottlingState {\n  factor?: number;\n  active: boolean;\n}\n\ninterface MediaFeaturesState {\n  mediaFeatures?: MediaFeature[];\n  active: boolean;\n}\n\ninterface MediaTypeState {\n  type?: string;\n  active: boolean;\n}\n\ninterface GeoLocationState {\n  geoLocation?: GeolocationOptions;\n  active: boolean;\n}\n\ninterface DefaultBackgroundColorState {\n  color?: Protocol.DOM.RGBA;\n  active: boolean;\n}\n\ninterface JavascriptEnabledState {\n  javaScriptEnabled: boolean;\n  active: boolean;\n}\n\n/**\n * @internal\n */\nexport interface ClientProvider {\n  clients(): CDPSession[];\n  registerState(state: EmulatedState<any>): void;\n}\n\n/**\n * @internal\n */\nexport class EmulatedState<T extends {active: boolean}> {\n  #state: T;\n  #clientProvider: ClientProvider;\n  #updater: (client: CDPSession, state: T) => Promise<void>;\n\n  constructor(\n    initialState: T,\n    clientProvider: ClientProvider,\n    updater: (client: CDPSession, state: T) => Promise<void>\n  ) {\n    this.#state = initialState;\n    this.#clientProvider = clientProvider;\n    this.#updater = updater;\n    this.#clientProvider.registerState(this);\n  }\n\n  async setState(state: T): Promise<void> {\n    this.#state = state;\n    await this.sync();\n  }\n\n  get state(): T {\n    return this.#state;\n  }\n\n  async sync(): Promise<void> {\n    await Promise.all(\n      this.#clientProvider.clients().map(client => {\n        return this.#updater(client, this.#state);\n      })\n    );\n  }\n}\n\n/**\n * @internal\n */\nexport class EmulationManager implements ClientProvider {\n  #client: CDPSession;\n\n  #emulatingMobile = false;\n  #hasTouch = false;\n\n  #states: Array<EmulatedState<any>> = [];\n\n  #viewportState = new EmulatedState<ViewportState>(\n    {\n      active: false,\n    },\n    this,\n    this.#applyViewport\n  );\n  #idleOverridesState = new EmulatedState<IdleOverridesState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateIdleState\n  );\n  #timezoneState = new EmulatedState<TimezoneState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateTimezone\n  );\n  #visionDeficiencyState = new EmulatedState<VisionDeficiencyState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateVisionDeficiency\n  );\n  #cpuThrottlingState = new EmulatedState<CpuThrottlingState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateCpuThrottling\n  );\n  #mediaFeaturesState = new EmulatedState<MediaFeaturesState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateMediaFeatures\n  );\n  #mediaTypeState = new EmulatedState<MediaTypeState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateMediaType\n  );\n  #geoLocationState = new EmulatedState<GeoLocationState>(\n    {\n      active: false,\n    },\n    this,\n    this.#setGeolocation\n  );\n  #defaultBackgroundColorState = new EmulatedState<DefaultBackgroundColorState>(\n    {\n      active: false,\n    },\n    this,\n    this.#setDefaultBackgroundColor\n  );\n  #javascriptEnabledState = new EmulatedState<JavascriptEnabledState>(\n    {\n      javaScriptEnabled: true,\n      active: false,\n    },\n    this,\n    this.#setJavaScriptEnabled\n  );\n\n  #secondaryClients = new Set<CDPSession>();\n\n  constructor(client: CDPSession) {\n    this.#client = client;\n  }\n\n  updateClient(client: CDPSession): void {\n    this.#client = client;\n    this.#secondaryClients.delete(client);\n  }\n\n  registerState(state: EmulatedState<any>): void {\n    this.#states.push(state);\n  }\n\n  clients(): CDPSession[] {\n    return [this.#client, ...Array.from(this.#secondaryClients)];\n  }\n\n  async registerSpeculativeSession(client: CDPSession): Promise<void> {\n    this.#secondaryClients.add(client);\n    client.once(CDPSessionEvent.Disconnected, () => {\n      this.#secondaryClients.delete(client);\n    });\n    // We don't await here because we want to register all state changes before\n    // the target is unpaused.\n    void Promise.all(\n      this.#states.map(s => {\n        return s.sync().catch(debugError);\n      })\n    );\n  }\n\n  get javascriptEnabled(): boolean {\n    return this.#javascriptEnabledState.state.javaScriptEnabled;\n  }\n\n  async emulateViewport(viewport: Viewport | null): Promise<boolean> {\n    const currentState = this.#viewportState.state;\n    if (!viewport && !currentState.active) {\n      return false;\n    }\n    await this.#viewportState.setState(\n      viewport\n        ? {\n            viewport,\n            active: true,\n          }\n        : {\n            active: false,\n          }\n    );\n\n    const mobile = viewport?.isMobile || false;\n    const hasTouch = viewport?.hasTouch || false;\n    const reloadNeeded =\n      this.#emulatingMobile !== mobile || this.#hasTouch !== hasTouch;\n    this.#emulatingMobile = mobile;\n    this.#hasTouch = hasTouch;\n\n    return reloadNeeded;\n  }\n\n  @invokeAtMostOnceForArguments\n  async #applyViewport(\n    client: CDPSession,\n    viewportState: ViewportState\n  ): Promise<void> {\n    if (!viewportState.viewport) {\n      await Promise.all([\n        client.send('Emulation.clearDeviceMetricsOverride'),\n        client.send('Emulation.setTouchEmulationEnabled', {\n          enabled: false,\n        }),\n      ]).catch(debugError);\n      return;\n    }\n    const {viewport} = viewportState;\n    const mobile = viewport.isMobile || false;\n    const width = viewport.width;\n    const height = viewport.height;\n    const deviceScaleFactor = viewport.deviceScaleFactor ?? 1;\n    const screenOrientation: Protocol.Emulation.ScreenOrientation =\n      viewport.isLandscape\n        ? {angle: 90, type: 'landscapePrimary'}\n        : {angle: 0, type: 'portraitPrimary'};\n    const hasTouch = viewport.hasTouch || false;\n\n    await Promise.all([\n      client\n        .send('Emulation.setDeviceMetricsOverride', {\n          mobile,\n          width,\n          height,\n          deviceScaleFactor,\n          screenOrientation,\n        })\n        .catch(err => {\n          if (\n            err.message.includes('Target does not support metrics override')\n          ) {\n            debugError(err);\n            return;\n          }\n          throw err;\n        }),\n      client.send('Emulation.setTouchEmulationEnabled', {\n        enabled: hasTouch,\n      }),\n    ]);\n  }\n\n  async emulateIdleState(overrides?: {\n    isUserActive: boolean;\n    isScreenUnlocked: boolean;\n  }): Promise<void> {\n    await this.#idleOverridesState.setState({\n      active: true,\n      overrides,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateIdleState(\n    client: CDPSession,\n    idleStateState: IdleOverridesState\n  ): Promise<void> {\n    if (!idleStateState.active) {\n      return;\n    }\n    if (idleStateState.overrides) {\n      await client.send('Emulation.setIdleOverride', {\n        isUserActive: idleStateState.overrides.isUserActive,\n        isScreenUnlocked: idleStateState.overrides.isScreenUnlocked,\n      });\n    } else {\n      await client.send('Emulation.clearIdleOverride');\n    }\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateTimezone(\n    client: CDPSession,\n    timezoneState: TimezoneState\n  ): Promise<void> {\n    if (!timezoneState.active) {\n      return;\n    }\n    try {\n      await client.send('Emulation.setTimezoneOverride', {\n        timezoneId: timezoneState.timezoneId || '',\n      });\n    } catch (error) {\n      if (isErrorLike(error) && error.message.includes('Invalid timezone')) {\n        throw new Error(`Invalid timezone ID: ${timezoneState.timezoneId}`);\n      }\n      throw error;\n    }\n  }\n\n  async emulateTimezone(timezoneId?: string): Promise<void> {\n    await this.#timezoneState.setState({\n      timezoneId,\n      active: true,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateVisionDeficiency(\n    client: CDPSession,\n    visionDeficiency: VisionDeficiencyState\n  ): Promise<void> {\n    if (!visionDeficiency.active) {\n      return;\n    }\n    await client.send('Emulation.setEmulatedVisionDeficiency', {\n      type: visionDeficiency.visionDeficiency || 'none',\n    });\n  }\n\n  async emulateVisionDeficiency(\n    type?: Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n  ): Promise<void> {\n    const visionDeficiencies = new Set<\n      Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n    >([\n      'none',\n      'achromatopsia',\n      'blurredVision',\n      'deuteranopia',\n      'protanopia',\n      'tritanopia',\n    ]);\n    assert(\n      !type || visionDeficiencies.has(type),\n      `Unsupported vision deficiency: ${type}`\n    );\n    await this.#visionDeficiencyState.setState({\n      active: true,\n      visionDeficiency: type,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateCpuThrottling(\n    client: CDPSession,\n    state: CpuThrottlingState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setCPUThrottlingRate', {\n      rate: state.factor ?? 1,\n    });\n  }\n\n  async emulateCPUThrottling(factor: number | null): Promise<void> {\n    assert(\n      factor === null || factor >= 1,\n      'Throttling rate should be greater or equal to 1'\n    );\n    await this.#cpuThrottlingState.setState({\n      active: true,\n      factor: factor ?? undefined,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateMediaFeatures(\n    client: CDPSession,\n    state: MediaFeaturesState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setEmulatedMedia', {\n      features: state.mediaFeatures,\n    });\n  }\n\n  async emulateMediaFeatures(features?: MediaFeature[]): Promise<void> {\n    if (Array.isArray(features)) {\n      for (const mediaFeature of features) {\n        const name = mediaFeature.name;\n        assert(\n          /^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(\n            name\n          ),\n          'Unsupported media feature: ' + name\n        );\n      }\n    }\n    await this.#mediaFeaturesState.setState({\n      active: true,\n      mediaFeatures: features,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateMediaType(\n    client: CDPSession,\n    state: MediaTypeState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setEmulatedMedia', {\n      media: state.type || '',\n    });\n  }\n\n  async emulateMediaType(type?: string): Promise<void> {\n    assert(\n      type === 'screen' ||\n        type === 'print' ||\n        (type ?? undefined) === undefined,\n      'Unsupported media type: ' + type\n    );\n    await this.#mediaTypeState.setState({\n      type,\n      active: true,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #setGeolocation(\n    client: CDPSession,\n    state: GeoLocationState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send(\n      'Emulation.setGeolocationOverride',\n      state.geoLocation\n        ? {\n            longitude: state.geoLocation.longitude,\n            latitude: state.geoLocation.latitude,\n            accuracy: state.geoLocation.accuracy,\n          }\n        : undefined\n    );\n  }\n\n  async setGeolocation(options: GeolocationOptions): Promise<void> {\n    const {longitude, latitude, accuracy = 0} = options;\n    if (longitude < -180 || longitude > 180) {\n      throw new Error(\n        `Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`\n      );\n    }\n    if (latitude < -90 || latitude > 90) {\n      throw new Error(\n        `Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`\n      );\n    }\n    if (accuracy < 0) {\n      throw new Error(\n        `Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`\n      );\n    }\n    await this.#geoLocationState.setState({\n      active: true,\n      geoLocation: {\n        longitude,\n        latitude,\n        accuracy,\n      },\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #setDefaultBackgroundColor(\n    client: CDPSession,\n    state: DefaultBackgroundColorState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setDefaultBackgroundColorOverride', {\n      color: state.color,\n    });\n  }\n\n  /**\n   * Resets default white background\n   */\n  async resetDefaultBackgroundColor(): Promise<void> {\n    await this.#defaultBackgroundColorState.setState({\n      active: true,\n      color: undefined,\n    });\n  }\n\n  /**\n   * Hides default white background\n   */\n  async setTransparentBackgroundColor(): Promise<void> {\n    await this.#defaultBackgroundColorState.setState({\n      active: true,\n      color: {r: 0, g: 0, b: 0, a: 0},\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #setJavaScriptEnabled(\n    client: CDPSession,\n    state: JavascriptEnabledState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setScriptExecutionDisabled', {\n      value: !state.javaScriptEnabled,\n    });\n  }\n\n  async setJavaScriptEnabled(enabled: boolean): Promise<void> {\n    await this.#javascriptEnabledState.setState({\n      active: true,\n      javaScriptEnabled: enabled,\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,SAAyBA,eAAe,QAAO,sBAAsB;AAErE,SAAQC,UAAU,QAAO,mBAAmB;AAE5C,SAAQC,MAAM,QAAO,mBAAmB;AACxC,SAAQC,4BAA4B,QAAO,uBAAuB;AAClE,SAAQC,WAAW,QAAO,sBAAsB;AA+DhD;;;AAGA,OAAM,MAAOC,aAAa;EACxB,CAAAC,KAAM;EACN,CAAAC,cAAe;EACf,CAAAC,OAAQ;EAERC,YACEC,YAAe,EACfH,cAA8B,EAC9BC,OAAwD;IAExD,IAAI,CAAC,CAAAF,KAAM,GAAGI,YAAY;IAC1B,IAAI,CAAC,CAAAH,cAAe,GAAGA,cAAc;IACrC,IAAI,CAAC,CAAAC,OAAQ,GAAGA,OAAO;IACvB,IAAI,CAAC,CAAAD,cAAe,CAACI,aAAa,CAAC,IAAI,CAAC;EAC1C;EAEA,MAAMC,QAAQA,CAACN,KAAQ;IACrB,IAAI,CAAC,CAAAA,KAAM,GAAGA,KAAK;IACnB,MAAM,IAAI,CAACO,IAAI,EAAE;EACnB;EAEA,IAAIP,KAAKA,CAAA;IACP,OAAO,IAAI,CAAC,CAAAA,KAAM;EACpB;EAEA,MAAMO,IAAIA,CAAA;IACR,MAAMC,OAAO,CAACC,GAAG,CACf,IAAI,CAAC,CAAAR,cAAe,CAACS,OAAO,EAAE,CAACC,GAAG,CAACC,MAAM,IAAG;MAC1C,OAAO,IAAI,CAAC,CAAAV,OAAQ,CAACU,MAAM,EAAE,IAAI,CAAC,CAAAZ,KAAM,CAAC;IAC3C,CAAC,CAAC,CACH;EACH;;AAGF;;;IAGaa,gBAAgB;;;;;;;;;;;;;;;;;;;;;;eAAhBA,gBAAgB;;;2CA+I1BhB,4BAA4B;8CA2D5BA,4BAA4B;6CAkB5BA,4BAA4B;qDA2B5BA,4BAA4B;kDAoC5BA,4BAA4B;kDAwB5BA,4BAA4B;8CA+B5BA,4BAA4B;4CA0B5BA,4BAA4B;uDA+C5BA,4BAA4B;kDAiC5BA,4BAA4B;MA5S7BiB,YAAA,OAAAC,iCAAA;QAAAC,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBM,aAA4B;UAE5B,IAAI,CAACA,aAAa,CAACC,QAAQ,EAAE;YAC3B,MAAMX,OAAO,CAACC,GAAG,CAAC,CAChBG,MAAM,CAACQ,IAAI,CAAC,sCAAsC,CAAC,EACnDR,MAAM,CAACQ,IAAI,CAAC,oCAAoC,EAAE;cAChDC,OAAO,EAAE;aACV,CAAC,CACH,CAAC,CAACC,KAAK,CAAC3B,UAAU,CAAC;YACpB;UACF;UACA,MAAM;YAACwB;UAAQ,CAAC,GAAGD,aAAa;UAChC,MAAMK,MAAM,GAAGJ,QAAQ,CAACK,QAAQ,IAAI,KAAK;UACzC,MAAMC,KAAK,GAAGN,QAAQ,CAACM,KAAK;UAC5B,MAAMC,MAAM,GAAGP,QAAQ,CAACO,MAAM;UAC9B,MAAMC,iBAAiB,GAAGR,QAAQ,CAACQ,iBAAiB,IAAI,CAAC;UACzD,MAAMC,iBAAiB,GACrBT,QAAQ,CAACU,WAAW,GAChB;YAACC,KAAK,EAAE,EAAE;YAAEC,IAAI,EAAE;UAAkB,CAAC,GACrC;YAACD,KAAK,EAAE,CAAC;YAAEC,IAAI,EAAE;UAAiB,CAAC;UACzC,MAAMC,QAAQ,GAAGb,QAAQ,CAACa,QAAQ,IAAI,KAAK;UAE3C,MAAMxB,OAAO,CAACC,GAAG,CAAC,CAChBG,MAAM,CACHQ,IAAI,CAAC,oCAAoC,EAAE;YAC1CG,MAAM;YACNE,KAAK;YACLC,MAAM;YACNC,iBAAiB;YACjBC;WACD,CAAC,CACDN,KAAK,CAACW,GAAG,IAAG;YACX,IACEA,GAAG,CAACC,OAAO,CAACC,QAAQ,CAAC,0CAA0C,CAAC,EAChE;cACAxC,UAAU,CAACsC,GAAG,CAAC;cACf;YACF;YACA,MAAMA,GAAG;UACX,CAAC,CAAC,EACJrB,MAAM,CAACQ,IAAI,CAAC,oCAAoC,EAAE;YAChDC,OAAO,EAAEW;WACV,CAAC,CACH,CAAC;QACJ,CAAC;MAAA,GAAAI,iCAAA;QAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IA9CK,CAAAC,aAAc,IAAAD,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAAd,CAAAC;QAAc;QAAAE,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MA2DpBlC,YAAA,OAAAmC,oCAAA;QAAAjC,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBsC,cAAkC;UAElC,IAAI,CAACA,cAAc,CAACC,MAAM,EAAE;YAC1B;UACF;UACA,IAAID,cAAc,CAACE,SAAS,EAAE;YAC5B,MAAMxC,MAAM,CAACQ,IAAI,CAAC,2BAA2B,EAAE;cAC7CiC,YAAY,EAAEH,cAAc,CAACE,SAAS,CAACC,YAAY;cACnDC,gBAAgB,EAAEJ,cAAc,CAACE,SAAS,CAACE;aAC5C,CAAC;UACJ,CAAC,MAAM;YACL,MAAM1C,MAAM,CAACQ,IAAI,CAAC,6BAA6B,CAAC;UAClD;QACF,CAAC;MAAA,GAAAmC,oCAAA;QAAAlB,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAfK,CAAAa,gBAAiB,IAAAb,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAAjB,CAAAa;QAAiB;QAAAV,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MAkBvBlC,YAAA,OAAA2C,mCAAA;QAAAzC,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClB8C,aAA4B;UAE5B,IAAI,CAACA,aAAa,CAACP,MAAM,EAAE;YACzB;UACF;UACA,IAAI;YACF,MAAMvC,MAAM,CAACQ,IAAI,CAAC,+BAA+B,EAAE;cACjDuC,UAAU,EAAED,aAAa,CAACC,UAAU,IAAI;aACzC,CAAC;UACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;YACd,IAAI9D,WAAW,CAAC8D,KAAK,CAAC,IAAIA,KAAK,CAAC1B,OAAO,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;cACpE,MAAM,IAAI0B,KAAK,CAAC,wBAAwBH,aAAa,CAACC,UAAU,EAAE,CAAC;YACrE;YACA,MAAMC,KAAK;UACb;QACF,CAAC;MAAA,GAAAE,mCAAA;QAAAzB,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAjBK,CAAAoB,eAAgB,IAAApB,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAAhB,CAAAoB;QAAgB;QAAAjB,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MA2BtBlC,YAAA,OAAAkD,2CAAA;QAAAhD,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBqD,gBAAuC;UAEvC,IAAI,CAACA,gBAAgB,CAACd,MAAM,EAAE;YAC5B;UACF;UACA,MAAMvC,MAAM,CAACQ,IAAI,CAAC,uCAAuC,EAAE;YACzDW,IAAI,EAAEkC,gBAAgB,CAACA,gBAAgB,IAAI;WAC5C,CAAC;QACJ,CAAC;MAAA,GAAAC,2CAAA;QAAA7B,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAVK,CAAAwB,uBAAwB,IAAAxB,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAAxB,CAAAwB;QAAwB;QAAArB,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MAoC9BlC,YAAA,OAAAsD,wCAAA;QAAApD,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBZ,KAAyB;UAEzB,IAAI,CAACA,KAAK,CAACmD,MAAM,EAAE;YACjB;UACF;UACA,MAAMvC,MAAM,CAACQ,IAAI,CAAC,gCAAgC,EAAE;YAClDiD,IAAI,EAAErE,KAAK,CAACsE,MAAM,IAAI;WACvB,CAAC;QACJ,CAAC;MAAA,GAAAC,wCAAA;QAAAlC,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAVK,CAAA6B,oBAAqB,IAAA7B,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAArB,CAAA6B;QAAqB;QAAA1B,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MAwB3BlC,YAAA,OAAA2D,wCAAA;QAAAzD,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBZ,KAAyB;UAEzB,IAAI,CAACA,KAAK,CAACmD,MAAM,EAAE;YACjB;UACF;UACA,MAAMvC,MAAM,CAACQ,IAAI,CAAC,4BAA4B,EAAE;YAC9CsD,QAAQ,EAAE1E,KAAK,CAAC2E;WACjB,CAAC;QACJ,CAAC;MAAA,GAAAC,wCAAA;QAAAvC,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAVK,CAAAkC,oBAAqB,IAAAlC,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAArB,CAAAkC;QAAqB;QAAA/B,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MA+B3BlC,YAAA,OAAAgE,oCAAA;QAAA9D,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBZ,KAAqB;UAErB,IAAI,CAACA,KAAK,CAACmD,MAAM,EAAE;YACjB;UACF;UACA,MAAMvC,MAAM,CAACQ,IAAI,CAAC,4BAA4B,EAAE;YAC9C2D,KAAK,EAAE/E,KAAK,CAAC+B,IAAI,IAAI;WACtB,CAAC;QACJ,CAAC;MAAA,GAAAiD,oCAAA;QAAA3C,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAVK,CAAAsC,gBAAiB,IAAAtC,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAAjB,CAAAsC;QAAiB;QAAAnC,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MA0BvBlC,YAAA,OAAAoE,kCAAA;QAAAlE,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBZ,KAAuB;UAEvB,IAAI,CAACA,KAAK,CAACmD,MAAM,EAAE;YACjB;UACF;UACA,MAAMvC,MAAM,CAACQ,IAAI,CACf,kCAAkC,EAClCpB,KAAK,CAACmF,WAAW,GACb;YACEC,SAAS,EAAEpF,KAAK,CAACmF,WAAW,CAACC,SAAS;YACtCC,QAAQ,EAAErF,KAAK,CAACmF,WAAW,CAACE,QAAQ;YACpCC,QAAQ,EAAEtF,KAAK,CAACmF,WAAW,CAACG;WAC7B,GACDC,SAAS,CACd;QACH,CAAC;MAAA,GAAAC,kCAAA;QAAAnD,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAjBK,CAAA8C,cAAe,IAAA9C,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAAf,CAAA8C;QAAe;QAAA3C,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MA+CrBlC,YAAA,OAAA4E,6CAAA;QAAA1E,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBZ,KAAkC;UAElC,IAAI,CAACA,KAAK,CAACmD,MAAM,EAAE;YACjB;UACF;UACA,MAAMvC,MAAM,CAACQ,IAAI,CAAC,6CAA6C,EAAE;YAC/DuE,KAAK,EAAE3F,KAAK,CAAC2F;WACd,CAAC;QACJ,CAAC;MAAA,GAAAC,6CAAA;QAAAvD,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAVK,CAAAkD,yBAA0B,IAAAlD,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAA1B,CAAAkD;QAA0B;QAAA/C,QAAA,EAAAC;MAAA,SAAAC,0BAAA;MAiChClC,YAAA,OAAAgF,wCAAA;QAAA9E,KAAA,EAAAC,iBAAA,iBACEL,MAAkB,EAClBZ,KAA6B;UAE7B,IAAI,CAACA,KAAK,CAACmD,MAAM,EAAE;YACjB;UACF;UACA,MAAMvC,MAAM,CAACQ,IAAI,CAAC,sCAAsC,EAAE;YACxDJ,KAAK,EAAE,CAAChB,KAAK,CAAC+F;WACf,CAAC;QACJ,CAAC;MAAA,GAAAC,wCAAA;QAAA3D,IAAA;QAAAC,IAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;UAAAC,GAAA,EAAAC,GAAA,IAVK,CAAAsD,oBAAqB,IAAAtD,GAAA;UAAAE,GAAA,EAAAF,GAAA,IAAAA,GAAA,CAArB,CAAAsD;QAAqB;QAAAnD,QAAA,EAAAC;MAAA,SAAAC,0BAAA;;;;;;;;IA5b3B,CAAApC,MAAO,GADIsF,iBAAA,OAAAlD,0BAAA,CAAgB;IAG3B,CAAAmD,eAAgB,GAAG,KAAK;IACxB,CAAAnE,QAAS,GAAG,KAAK;IAEjB,CAAAoE,MAAO,GAA8B,EAAE;IAEvC,CAAAlF,aAAc,GAAG,IAAInB,aAAa,CAChC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAAP,aAAc,CACpB;IACD,CAAAyD,kBAAmB,GAAG,IAAItG,aAAa,CACrC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAAK,gBAAiB,CACvB;IACD,CAAAE,aAAc,GAAG,IAAI3D,aAAa,CAChC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAAY,eAAgB,CACtB;IACD,CAAAuC,qBAAsB,GAAG,IAAIvG,aAAa,CACxC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAAgB,uBAAwB,CAC9B;IACD,CAAAoC,kBAAmB,GAAG,IAAIxG,aAAa,CACrC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAAqB,oBAAqB,CAC3B;IACD,CAAAgC,kBAAmB,GAAG,IAAIzG,aAAa,CACrC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAA0B,oBAAqB,CAC3B;IACD,CAAA4B,cAAe,GAAG,IAAI1G,aAAa,CACjC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAA8B,gBAAiB,CACvB;IACD,CAAAyB,gBAAiB,GAAG,IAAI3G,aAAa,CACnC;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAAsC,cAAe,CACrB;IACD,CAAAkB,2BAA4B,GAAG,IAAI5G,aAAa,CAC9C;MACEoD,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAA0C,yBAA0B,CAChC;IACD,CAAAe,sBAAuB,GAAG,IAAI7G,aAAa,CACzC;MACEgG,iBAAiB,EAAE,IAAI;MACvB5C,MAAM,EAAE;KACT,EACD,IAAI,EACJ,IAAI,CAAC,CAAA8C,oBAAqB,CAC3B;IAED,CAAAY,gBAAiB,GAAG,IAAIC,GAAG,EAAc;IAEzC3G,YAAYS,MAAkB;MAC5B,IAAI,CAAC,CAAAA,MAAO,GAAGA,MAAM;IACvB;IAEAmG,YAAYA,CAACnG,MAAkB;MAC7B,IAAI,CAAC,CAAAA,MAAO,GAAGA,MAAM;MACrB,IAAI,CAAC,CAAAiG,gBAAiB,CAACG,MAAM,CAACpG,MAAM,CAAC;IACvC;IAEAP,aAAaA,CAACL,KAAyB;MACrC,IAAI,CAAC,CAAAoG,MAAO,CAACa,IAAI,CAACjH,KAAK,CAAC;IAC1B;IAEAU,OAAOA,CAAA;MACL,OAAO,CAAC,IAAI,CAAC,CAAAE,MAAO,EAAE,GAAGsG,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC,CAAAN,gBAAiB,CAAC,CAAC;IAC9D;IAEA,MAAMO,0BAA0BA,CAACxG,MAAkB;MACjD,IAAI,CAAC,CAAAiG,gBAAiB,CAACQ,GAAG,CAACzG,MAAM,CAAC;MAClCA,MAAM,CAAC0G,IAAI,CAAC5H,eAAe,CAAC6H,YAAY,EAAE,MAAK;QAC7C,IAAI,CAAC,CAAAV,gBAAiB,CAACG,MAAM,CAACpG,MAAM,CAAC;MACvC,CAAC,CAAC;MACF;MACA;MACA,KAAKJ,OAAO,CAACC,GAAG,CACd,IAAI,CAAC,CAAA2F,MAAO,CAACzF,GAAG,CAAC6G,CAAC,IAAG;QACnB,OAAOA,CAAC,CAACjH,IAAI,EAAE,CAACe,KAAK,CAAC3B,UAAU,CAAC;MACnC,CAAC,CAAC,CACH;IACH;IAEA,IAAI8H,iBAAiBA,CAAA;MACnB,OAAO,IAAI,CAAC,CAAAb,sBAAuB,CAAC5G,KAAK,CAAC+F,iBAAiB;IAC7D;IAEA,MAAM2B,eAAeA,CAACvG,QAAyB;MAC7C,MAAMwG,YAAY,GAAG,IAAI,CAAC,CAAAzG,aAAc,CAAClB,KAAK;MAC9C,IAAI,CAACmB,QAAQ,IAAI,CAACwG,YAAY,CAACxE,MAAM,EAAE;QACrC,OAAO,KAAK;MACd;MACA,MAAM,IAAI,CAAC,CAAAjC,aAAc,CAACZ,QAAQ,CAChCa,QAAQ,GACJ;QACEA,QAAQ;QACRgC,MAAM,EAAE;OACT,GACD;QACEA,MAAM,EAAE;OACT,CACN;MAED,MAAM5B,MAAM,GAAGJ,QAAQ,EAAEK,QAAQ,IAAI,KAAK;MAC1C,MAAMQ,QAAQ,GAAGb,QAAQ,EAAEa,QAAQ,IAAI,KAAK;MAC5C,MAAM4F,YAAY,GAChB,IAAI,CAAC,CAAAzB,eAAgB,KAAK5E,MAAM,IAAI,IAAI,CAAC,CAAAS,QAAS,KAAKA,QAAQ;MACjE,IAAI,CAAC,CAAAmE,eAAgB,GAAG5E,MAAM;MAC9B,IAAI,CAAC,CAAAS,QAAS,GAAGA,QAAQ;MAEzB,OAAO4F,YAAY;IACrB;IAGA,IAAM,CAAAhF,aAAciF,CAAA;MAAA,OAAA9G,iCAAA,CAAAC,KAAA;IAAA;IAgDpB,MAAMwC,gBAAgBA,CAACJ,SAGtB;MACC,MAAM,IAAI,CAAC,CAAAiD,kBAAmB,CAAC/F,QAAQ,CAAC;QACtC6C,MAAM,EAAE,IAAI;QACZC;OACD,CAAC;IACJ;IAGA,IAAM,CAAAI,gBAAiBsE,CAAA;MAAA,OAAA7E,oCAAA,CAAAjC,KAAA;IAAA;IAkBvB,IAAM,CAAA+C,eAAgBgE,CAAA;MAAA,OAAAtE,mCAAA,CAAAzC,KAAA;IAAA;IAmBtB,MAAM+C,eAAeA,CAACJ,UAAmB;MACvC,MAAM,IAAI,CAAC,CAAAD,aAAc,CAACpD,QAAQ,CAAC;QACjCqD,UAAU;QACVR,MAAM,EAAE;OACT,CAAC;IACJ;IAGA,IAAM,CAAAgB,uBAAwB6D,CAAA;MAAA,OAAAhE,2CAAA,CAAAhD,KAAA;IAAA;IAY9B,MAAMmD,uBAAuBA,CAC3BpC,IAAoE;MAEpE,MAAMkG,kBAAkB,GAAG,IAAInB,GAAG,CAEhC,CACA,MAAM,EACN,eAAe,EACf,eAAe,EACf,cAAc,EACd,YAAY,EACZ,YAAY,CACb,CAAC;MACFlH,MAAM,CACJ,CAACmC,IAAI,IAAIkG,kBAAkB,CAACvF,GAAG,CAACX,IAAI,CAAC,EACrC,kCAAkCA,IAAI,EAAE,CACzC;MACD,MAAM,IAAI,CAAC,CAAAuE,qBAAsB,CAAChG,QAAQ,CAAC;QACzC6C,MAAM,EAAE,IAAI;QACZc,gBAAgB,EAAElC;OACnB,CAAC;IACJ;IAGA,IAAM,CAAAyC,oBAAqB0D,CAAA;MAAA,OAAA9D,wCAAA,CAAApD,KAAA;IAAA;IAY3B,MAAMmH,oBAAoBA,CAAC7D,MAAqB;MAC9C1E,MAAM,CACJ0E,MAAM,KAAK,IAAI,IAAIA,MAAM,IAAI,CAAC,EAC9B,iDAAiD,CAClD;MACD,MAAM,IAAI,CAAC,CAAAiC,kBAAmB,CAACjG,QAAQ,CAAC;QACtC6C,MAAM,EAAE,IAAI;QACZmB,MAAM,EAAEA,MAAM,IAAIiB;OACnB,CAAC;IACJ;IAGA,IAAM,CAAAV,oBAAqBuD,CAAA;MAAA,OAAA3D,wCAAA,CAAAzD,KAAA;IAAA;IAY3B,MAAM6D,oBAAoBA,CAACH,QAAyB;MAClD,IAAIwC,KAAK,CAACmB,OAAO,CAAC3D,QAAQ,CAAC,EAAE;QAC3B,KAAK,MAAM4D,YAAY,IAAI5D,QAAQ,EAAE;UACnC,MAAMpC,IAAI,GAAGgG,YAAY,CAAChG,IAAI;UAC9B1C,MAAM,CACJ,2DAA2D,CAAC2I,IAAI,CAC9DjG,IAAI,CACL,EACD,6BAA6B,GAAGA,IAAI,CACrC;QACH;MACF;MACA,MAAM,IAAI,CAAC,CAAAkE,kBAAmB,CAAClG,QAAQ,CAAC;QACtC6C,MAAM,EAAE,IAAI;QACZwB,aAAa,EAAED;OAChB,CAAC;IACJ;IAGA,IAAM,CAAAO,gBAAiBuD,CAAA;MAAA,OAAA1D,oCAAA,CAAA9D,KAAA;IAAA;IAYvB,MAAMiE,gBAAgBA,CAAClD,IAAa;MAClCnC,MAAM,CACJmC,IAAI,KAAK,QAAQ,IACfA,IAAI,KAAK,OAAO,IAChB,CAACA,IAAI,IAAIwD,SAAS,MAAMA,SAAS,EACnC,0BAA0B,GAAGxD,IAAI,CAClC;MACD,MAAM,IAAI,CAAC,CAAA0E,cAAe,CAACnG,QAAQ,CAAC;QAClCyB,IAAI;QACJoB,MAAM,EAAE;OACT,CAAC;IACJ;IAGA,IAAM,CAAAsC,cAAegD,CAAA;MAAA,OAAAvD,kCAAA,CAAAlE,KAAA;IAAA;IAmBrB,MAAMyE,cAAcA,CAACiD,OAA2B;MAC9C,MAAM;QAACtD,SAAS;QAAEC,QAAQ;QAAEC,QAAQ,GAAG;MAAC,CAAC,GAAGoD,OAAO;MACnD,IAAItD,SAAS,GAAG,CAAC,GAAG,IAAIA,SAAS,GAAG,GAAG,EAAE;QACvC,MAAM,IAAIvB,KAAK,CACb,sBAAsBuB,SAAS,kDAAkD,CAClF;MACH;MACA,IAAIC,QAAQ,GAAG,CAAC,EAAE,IAAIA,QAAQ,GAAG,EAAE,EAAE;QACnC,MAAM,IAAIxB,KAAK,CACb,qBAAqBwB,QAAQ,+CAA+C,CAC7E;MACH;MACA,IAAIC,QAAQ,GAAG,CAAC,EAAE;QAChB,MAAM,IAAIzB,KAAK,CACb,qBAAqByB,QAAQ,uCAAuC,CACrE;MACH;MACA,MAAM,IAAI,CAAC,CAAAoB,gBAAiB,CAACpG,QAAQ,CAAC;QACpC6C,MAAM,EAAE,IAAI;QACZgC,WAAW,EAAE;UACXC,SAAS;UACTC,QAAQ;UACRC;;OAEH,CAAC;IACJ;IAGA,IAAM,CAAAO,yBAA0B8C,CAAA;MAAA,OAAAjD,6CAAA,CAAA1E,KAAA;IAAA;IAYhC;;;IAGA,MAAM4H,2BAA2BA,CAAA;MAC/B,MAAM,IAAI,CAAC,CAAAjC,2BAA4B,CAACrG,QAAQ,CAAC;QAC/C6C,MAAM,EAAE,IAAI;QACZwC,KAAK,EAAEJ;OACR,CAAC;IACJ;IAEA;;;IAGA,MAAMsD,6BAA6BA,CAAA;MACjC,MAAM,IAAI,CAAC,CAAAlC,2BAA4B,CAACrG,QAAQ,CAAC;QAC/C6C,MAAM,EAAE,IAAI;QACZwC,KAAK,EAAE;UAACmD,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAC;OAC/B,CAAC;IACJ;IAGA,IAAM,CAAAhD,oBAAqBiD,CAAA;MAAA,OAAApD,wCAAA,CAAA9E,KAAA;IAAA;IAY3B,MAAMiF,oBAAoBA,CAAC5E,OAAgB;MACzC,MAAM,IAAI,CAAC,CAAAuF,sBAAuB,CAACtG,QAAQ,CAAC;QAC1C6C,MAAM,EAAE,IAAI;QACZ4C,iBAAiB,EAAE1E;OACpB,CAAC;IACJ;;;SA9cWR,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}